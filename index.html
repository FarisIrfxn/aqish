<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculator ‚Äî Surprise</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#fff6fb;--pink:#ff7ab6;--muted:#6b4257}
    *{box-sizing:border-box}
    body{margin:0;background:url('assets/cat.webp') repeat;background-size:100px 100px;font-family:Inter,system-ui,sans-serif;color:var(--muted);height:100vh;display:flex;align-items:center;justify-content:center}

    /* calculator look */
    .calc-wrap{width:360px;background:linear-gradient(180deg,rgba(255,255,255,0.85),rgba(255,255,255,0.7));border-radius:18px;padding:18px;box-shadow:0 10px 40px rgba(95,35,60,0.12);position:relative;overflow:hidden}
    .screen{height:84px;background:linear-gradient(180deg,#fff,#fff0f6);border-radius:12px;padding:12px;display:flex;flex-direction:column;justify-content:center;align-items:flex-end;font-size:28px;padding-right:18px}
    .sub{font-size:12px;color:#a57286}
    .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:14px}
    .btn{padding:14px;border-radius:10px;border:none;background:#fff;color:var(--muted);font-weight:600;box-shadow:0 6px 18px rgba(255,122,182,0.06);cursor:pointer}
    .btn.op{background:linear-gradient(90deg,var(--pink),#ff90c9);color:#fff}

    /* main surprise area (hidden until reveal) */
    .main{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:24px}
    .card{max-width:920px;width:100%;background:rgba(255,255,255,0.9);border-radius:18px;padding:28px;box-shadow:0 18px 60px rgba(31,12,34,0.12);text-align:center}
    h1{font-family:'Great Vibes',cursive;color:var(--pink);font-size:46px;margin:6px 0}
    .gallery{display:flex;gap:12px;justify-content:center;margin:16px 0}
    .photo{width:220px;height:140px;border-radius:12px;object-fit:cover;background:#fff0f6}
    .message{color:#6b4257;line-height:1.6;margin-top:8px}

    /* scary overlay */
    .scary{position:fixed;inset:0;background:#000;display:flex;align-items:center;justify-content:center;z-index:9999;opacity:0;pointer-events:none;transition:opacity .18s}
    .scary.show{opacity:1;pointer-events:auto}
    .scary img{max-width:90%;max-height:90%;border-radius:8px}



    /* reveal modal */
    #finalModal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(10,6,12,0.45);z-index:9998}
    #finalModal .box{background:white;padding:22px;border-radius:14px;max-width:640px;width:92%;text-align:center}

    /* minor responsive */
    @media (max-width:420px){.calc-wrap{width:92vw}.photo{width:140px;height:100px}}
  </style>
</head>
<body>

  <!-- Calculator prank UI -->
  <div class="calc-wrap" id="calcWrap">
    <div class="screen">
      <div class="sub">Calculator</div>
      <div id="display">0</div>
    </div>
    <div class="keys">
      <button class="btn">7</button><button class="btn">8</button><button class="btn">9</button><button class="btn op">√∑</button>
      <button class="btn">4</button><button class="btn">5</button><button class="btn">6</button><button class="btn op">√ó</button>
      <button class="btn">1</button><button class="btn">2</button><button class="btn">3</button><button class="btn op">‚àí</button>
      <button class="btn">0</button><button class="btn">.</button><button class="btn op" id="equals">=</button><button class="btn op">+</button>
    </div>
  </div>

  <!-- scary full-screen overlay (show briefly when = pressed) -->
  <div class="scary" id="scaryOverlay">
    <img src="assets/scary.png" alt="scary">
  </div>



  <!-- Main surprise content (hidden initially) -->
  <div class="main" id="mainArea">
    <div class="card">
      <h1 id="heroName">Happy Birthday, Aqish ‚ú®</h1>
      <p class="message" id="typingArea"></p>
      <div class="gallery">
        <img class="photo" id="p1" src="assets/photo1.jpg" alt="p1">
        <img class="photo" id="p2" src="assets/photo2.jpg" alt="p2">
      </div>
      <div style="margin-top:12px">
        <button class="btn op" id="revealBtn">Click to reveal more üíó</button>
      </div>
    </div>
  </div>

  <!-- modal after reveal -->
  <div id="finalModal">
    <div class="box">
      <h2 style="font-family:'Great Vibes',cursive;color:var(--pink);font-size:40px;margin:4px 0">For You, Sayang</h2>
      <p id="finalText" style="color:var(--muted);line-height:1.6"> </p>
      <div style="margin-top:16px"><button class="btn op" id="closeModal">Suka! ‚ù§Ô∏è</button></div>
    </div>
  </div>

  <!-- background audio (replace assets/song.mp3) -->
  <audio id="bgAudio" src="assets/song.wav" preload="auto" loop></audio>

  <!-- scary audio (replace assets/scary.mp3) -->
  <audio id="scaryAudio" src="assets/scary.mp3" preload="auto"></audio>

  <!-- CONFIG: edit these in the file -->
  <script>
    const NAME = 'Aqish'; // change to her name
    const TYPING_TEXT = `Happy Birthday, ${NAME}.

Moga berjaya and dapat capai apa yang diingini. For hadiah tunggu ya tengah shipping hehe üíñ

I love you, sorry for the BAAA! ‚Äî Faris`;
    const FINAL_MESSAGE = `Stay Comey and Antek üíñ`;

    document.getElementById('heroName').textContent = `Happy Birthday, ${NAME} ‚ú®`;

    const display = document.getElementById('display');
    const keys = Array.from(document.querySelectorAll('.keys .btn'));
    let current = '';

    keys.forEach(k=>{
      k.addEventListener('click', ()=>{
        const v = k.textContent.trim();
        if(v === '=') return; // handled separately
        if(['+','‚àí','√ó','√∑'].includes(v)){
          // convert visual ops to JS ops
          const map = {'√ó':'*','√∑':'/','‚àí':'-','+':'+'};
          current += map[v];
          display.textContent = v;
        } else if(v === '.'){
          current += '.'; display.textContent = current;
        } else {
          current += v; display.textContent = current;
        }
      });
    });

    // equals pressed -> prank: show scary for short moment then reveal
    document.getElementById('equals').addEventListener('click', async ()=>{
      // briefly show scary
      const overlay = document.getElementById('scaryOverlay');
      overlay.classList.add('show');
      // play scary sound
      document.getElementById('scaryAudio').play().catch(()=>{});
      // wait ~900ms
      await new Promise(r=>setTimeout(r,900));
      overlay.classList.remove('show');

      // then show main surprise
      const main = document.getElementById('mainArea');
      main.style.display = 'flex';

      // spawn falling faces like rain
      spawnFaces();

      // play background music (must be user gesture -> equals click qualifies)
      const audio = document.getElementById('bgAudio');
      audio.play().catch(()=>{});

      // type text
      typeText(document.getElementById('typingArea'), TYPING_TEXT, 28);

      // small confetti spawn
      spawnHearts();
      startConfetti();
    });

    // typing effect
    function typeText(el, text, speed=28){ el.textContent=''; let i=0; const t=setInterval(()=>{ el.textContent += text.charAt(i); i++; if(i>=text.length){ clearInterval(t); } }, speed); }

    // reveal modal
    document.getElementById('revealBtn').addEventListener('click', ()=>{
      document.getElementById('finalText').textContent = FINAL_MESSAGE;
      document.getElementById('finalModal').style.display = 'flex';
    });
    document.getElementById('closeModal').addEventListener('click', ()=>{
      document.getElementById('finalModal').style.display = 'none';
      const audio = document.getElementById('bgAudio');
      if(!audio.paused){
        const volInterval = setInterval(()=>{ if(audio.volume>0.05){ audio.volume = Math.max(0, audio.volume - 0.05);} else { audio.pause(); audio.volume=1; clearInterval(volInterval);} },120);
      }
    });

    // floating hearts + confetti (lighter than previous)
    function spawnHearts(){ const wrapper=document.createElement('div'); wrapper.style.position='fixed'; wrapper.style.inset='0'; wrapper.style.pointerEvents='none'; wrapper.style.zIndex='40'; document.body.appendChild(wrapper); for(let i=0;i<8;i++){ const h=document.createElement('div'); h.textContent='üíó'; h.style.position='absolute'; h.style.left=(10+Math.random()*80)+'%'; h.style.top='92%'; h.style.fontSize=(12+Math.random()*40)+'px'; h.style.opacity=0.9 - Math.random()*0.6; h.style.transition='transform 6s linear, opacity 6s linear'; wrapper.appendChild(h); setTimeout(()=>{ h.style.transform='translateY(-120vh) scale(.6)'; h.style.opacity='0'; },80); setTimeout(()=>h.remove(),7000);} setTimeout(()=>wrapper.remove(),7400); }

    function spawnFaces(){ const wrapper=document.createElement('div'); wrapper.style.position='fixed'; wrapper.style.inset='0'; wrapper.style.pointerEvents='none'; wrapper.style.zIndex='45'; document.body.appendChild(wrapper); const interval=setInterval(()=>{ for(let i=0;i<3;i++){ const f=document.createElement('img'); f.src='assets/herface.png'; f.style.position='absolute'; f.style.width='50px'; f.style.height='50px'; f.style.borderRadius='50%'; f.style.objectFit='cover'; f.style.left=(Math.random()*100)+'%'; f.style.top='-50px'; f.style.opacity=0.9; f.style.transition='transform 10s linear, opacity 10s linear'; wrapper.appendChild(f); setTimeout(()=>{ f.style.transform='translateY(110vh)'; f.style.opacity='0'; },100); setTimeout(()=>f.remove(),11000); } },300); setTimeout(()=>{ clearInterval(interval); setTimeout(()=>wrapper.remove(),12000); },10000); }

    function startConfetti(){ const canvas=document.createElement('canvas'); canvas.style.position='fixed'; canvas.style.left=0; canvas.style.top=0; canvas.style.width='100%'; canvas.style.height='100%'; canvas.style.zIndex=35; canvas.style.pointerEvents='none'; document.body.appendChild(canvas); const ctx=canvas.getContext('2d'); function resize(){canvas.width=innerWidth; canvas.height=innerHeight} resize(); window.addEventListener('resize',resize);
      const pieces=[]; const colors=['#ff7ab6','#ffd3ea','#ffb3d6','#fff0f6']; for(let i=0;i<60;i++){ pieces.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height- canvas.height,w:6+Math.random()*8,h:8+Math.random()*10,vx:-1+Math.random()*2,vy:2+Math.random()*4,color:colors[Math.floor(Math.random()*colors.length)],rot:Math.random()*360,vr:-2+Math.random()*4}); }
      let running=true; function frame(){ if(!running) return; ctx.clearRect(0,0,canvas.width,canvas.height); for(const p of pieces){ p.x+=p.vx; p.y+=p.vy; p.rot+=p.vr; ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180); ctx.fillStyle=p.color; ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h); ctx.restore(); if(p.y>canvas.height+40){ p.y=-20-Math.random()*200; p.x=Math.random()*canvas.width; } } requestAnimationFrame(frame);} frame(); setTimeout(()=>{ running=false; canvas.remove(); },9000); }
  </script>

  <!-- INSTRUCTIONS:
    - Replace assets/cat.webp with a cat image (WEBP) to use as tiled background.
    - Replace assets/scary.png with your scary face image (PNG/JPG) for the prank flash.
    - Replace assets/scary.mp3 with a short scary sound effect (MP3) to play during the prank.
    - Replace assets/herface.png with a PNG of her face (transparent preferred) to float.
    - Replace assets/photo1.jpg & photo2.jpg with your photos.
    - Replace assets/song.mp3 with your chosen background music.
    - Edit NAME, TYPING_TEXT and FINAL_MESSAGE in the <script> above.
    - Host on GitHub Pages / Netlify. The equals button (=) acts as the user gesture so audio will play.
  -->

</body>
</html>
